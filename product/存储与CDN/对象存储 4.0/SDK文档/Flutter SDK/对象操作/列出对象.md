## 简介

本文档提供关于列出对象操作相关的 API 概览以及 SDK 示例代码。

| API                                                          | 操作名         | 操作描述                                  |
| ------------------------------------------------------------ | -------------- | ----------------------------------------- |
| [GET Bucket（List Objects）](https://cloud.tencent.com/document/product/436/7734) | 查询对象列表   | 查询存储桶下的部分或者全部对象     |

## 查询对象列表

#### 功能说明

查询存储桶下的部分或者全部对象。

#### 示例代码一: 获取第一页数据

```dart
// 存储桶名称，由bucketname-appid 组成，appid必须填入，可以在COS控制台查看存储桶名称。 https://console.cloud.tencent.com/cos5/bucket
String bucket = "examplebucket-1250000000";
try {
  BucketContents bucketContents = await Cos().getDefaultService().getBucket(
      bucket,
      prefix: "dir/", // 前缀匹配，用来规定返回的对象前缀地址
      maxKeys: 100 // 单次返回最大的条目数量，默认1000
  );
  // 表示数据被截断，需要拉取下一页数据
  var isTruncated = bucketContents.isTruncated;
  // nextMarker 表示下一页的起始位置
  var nextMarker = bucketContents.nextMarker;
} catch (e) {
  // 失败后会抛异常 根据异常进行业务处理
  Toast.show(e.toString());
  print(e);
}
```

#### 示例代码二：请求下一页数据

```dart
// 存储桶名称，由bucketname-appid 组成，appid必须填入，可以在COS控制台查看存储桶名称。 https://console.cloud.tencent.com/cos5/bucket
String bucket = "examplebucket-1250000000";
// prevPageResult 是上一页的返回结果，这里的 nextMarker 表示下一页的起始位置
String nextMarker = prevPageResult.listBucket.nextMarker;
try {
  BucketContents bucketContents = await Cos().getDefaultService().getBucket(
      bucket,
      prefix: "dir/", // 前缀匹配，用来规定返回的对象前缀地址
      marker: nextMarker, // 起始位置
      maxKeys: 100 // 单次返回最大的条目数量，默认1000
  );
  // 表示数据被截断，需要拉取下一页数据
  var isTruncated = bucketContents.isTruncated;
  // nextMarker 表示下一页的起始位置
  var nextMarker = bucketContents.nextMarker;
} catch (e) {
  // 失败后会抛异常 根据异常进行业务处理
  Toast.show(e.toString());
  print(e);
}
```

#### 示例代码三：获取对象列表与子目录

```dart
// 存储桶名称，由bucketname-appid 组成，appid必须填入，可以在COS控制台查看存储桶名称。 https://console.cloud.tencent.com/cos5/bucket
String bucket = "examplebucket-1250000000";
// 定界符为一个符号，如果有 Prefix，
// 则将 Prefix 到 delimiter 之间的相同路径归为一类，定义为 Common Prefix，
// 然后列出所有 Common Prefix。如果没有 Prefix，则从路径起点开始
var delimiter = "/";
try {
  BucketContents bucketContents = await Cos().getDefaultService().getBucket(
      bucket,
      prefix: "dir/", // 前缀匹配，用来规定返回的对象前缀地址
      delimiter: delimiter,
      maxKeys: 100 // 单次返回最大的条目数量，默认1000
  );
  // 表示数据被截断，需要拉取下一页数据
  var isTruncated = bucketContents.isTruncated;
  // nextMarker 表示下一页的起始位置
  var nextMarker = bucketContents.nextMarker;
} catch (e) {
  // 失败后会抛异常 根据异常进行业务处理
  Toast.show(e.toString());
  print(e);
}
```